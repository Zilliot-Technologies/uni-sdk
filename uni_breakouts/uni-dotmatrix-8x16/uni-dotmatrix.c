#include <stdio.h>
#include "pico/stdlib.h"
#include "hardware/i2c.h"
#include "IS31FL3729.h"

#define I2C_SDA_PIN 22
#define I2C_SCL_PIN 23
#define SDB_PIN 24

#define USE_PATTERN 
// #define USE_ALPHANUMERIC

const uint8_t array[100][30]={
{0x03,0x04,0x05,0x06,0x13,0x16,0x23,0x26,0x33,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75,0x76},  // zero 0
{0x03,0x04,0x05,0x06,0x14,0x15,0x24,0x25,0x34,0x35,0x44,0x45,0x53,0x54,0x55,0x64,0x65,0x75},                 //one 1
{0x03,0x04,0x05,0x06,0x13,0x23,0x34,0x35,0x46,0x53,0x56,0x63,0x66,0x74,0x75},                           //two 2
{0x03,0x04,0x05,0x06,0x16,0x26,0x33,0x34,0x35,0x36,0x43,0x44,0x45,0x46,0x56,0x66,0x73,0x74,0x75,0x76},  //three 3
{0x06,0x16,0x26,0x36,0x43,0x44,0x45,0x46,0x53,0x56,0x63,0x66,0x73,0x76},                                //four 4
{0x03,0x04,0x05,0x06,0x16,0x26,0x36,0x44,0x45,0x53,0x63,0x73,0x74,0x75,0x76},                           //five 5
{0x03,0x04,0x05,0x06,0x13,0x16,0x23,0x26,0x33,0x36,0x43,0x44,0x45,0x46,0x53,0x63,0x73,0x74,0x75,0x76},  //six 6
{0x06,0x16,0x26,0x36,0x46,0x56,0x66,0x73,0x74,0x75,0x76},              //seven 7
{0x03,0x04,0x05,0x06,0x13,0x16,0x23,0x26,0x33,0x34,0x35,0x36,0x43,0x44,0x45,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75,0x76},    //eight 8 
{0x06,0x16,0x26,0x36,0x43,0x44,0x45,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75,0x76},              //nine 9
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////
{0X03,0X06,0X13,0X16,0X23,0X26,0X33,0X34,0X35,0X36,0X43,0X46,0X53,0X56,0X63,0X66,0X74,0X75},              // A
{0x03,0x04,0x05,0x13,0x16,0x23,0x26,0x33,0x34,0x35,0x36,0x43,0x44,0x45,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75},              // B
{0x03,0x04,0x05,0x06,0x13,0x23,0x33,0x43,0x53,0x63,0x73,0x74,0x75,0x76},              // C
{0x03,0x04,0x05,0x13,0x16,0x23,0x26,0x33,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75},              // D
{0x03,0x04,0x05,0x06,0x13,0x23,0x33,0x34,0x35,0x36,0x43,0x44,0x45,0x46,0x53,0x63,0x73,0x74,0x75,0x76},              // E
{0x03,0x13,0x23,0x33,0x34,0x35,0x36,0x43,0x44,0x45,0x46,0x53,0x63,0x73,0x74,0x75,0x76},              // f
{0x03,0x04,0x05,0x06,0x13,0x16,0x23,0x26,0x33,0x35,0x36,0x43,0x45,0x46,0x53,0x63,0x66,0x73,0x74,0x75,0x76},              // g
{0x03,0x06,0x13,0x16,0x23,0x26,0x33,0x34,0x35,0x36,0x43,0x44,0x45,0x46,0x53,0x56,0x63,0x66,0x73,0x76},              // h
{0x03,0x04,0x05,0x06,0x14,0x15,0x24,0x25,0x34,0x35,0x44,0x45,0x54,0x55,0x64,0x65,0x73,0x74,0x75,0x76},              // i
{0x03,0x04,0x05,0x14,0x15,0x24,0x25,0x34,0x35,0x44,0x45,0x54,0x55,0x64,0x65,0x73,0x74,0x75,0x76},              // j
{0x03,0x06,0x13,0x16,0x23,0x25,0x33,0x34,0x43,0x44,0x53,0x55,0x63,0x66,0x73,0x76},              // k
{0x03,0x04,0x05,0x06,0x13,0x23,0x33,0x43,0x53,0x63,0x73,},              // l
{0x02,0x07,0x12,0x17,0x22,0x27,0x32,0x37,0x42,0x44,0x45,0x47,0x52,0x54,0x55,0x57,0x62,0x63,0x66,0x67,0x72,0x77},              // m
{0x02,0x07,0x12,0x16,0x17,0x22,0x25,0x27,0x32,0x35,0x37,0x42,0x44,0x47,0x52,0x54,0x57,0x62,0x63,0x67,0x72,0x77},              // n
{0x04,0x05,0x13,0x16,0x23,0x26,0x33,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x74,0x75},              // o
{0x03,0x13,0x23,0x33,0x43,0x44,0x45,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75,0x76},             //p
{0x04,0x05,0x07,0x12,0x16,0x23,0x25,0x26,0x33,0x34,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x74,0x75},              // q
{0x03,0x06,0x13,0x16,0x23,0x25,0x33,0x34,0x35,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x73,0x74,0x75,0x76},              // r
{0x04,0x05,0x13,0x16,0x26,0x35,0x44,0x53,0x63,0x66,0x74,0x75},              // s
{0x04,0x05,0x14,0x15,0x24,0x25,0x34,0x35,0x44,0x45,0x54,0x55,0x63,0x64,0x65,0x66,0x73,0x74,0x75,0x76},              // t
{0x03,0x04,0x05,0x06,0x13,0x16,0x23,0x26,0x33,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x73,0x76},              // u
{0x04,0x05,0x14,0x15,0x23,0x26,0x33,0x36,0x43,0x46,0x53,0x56,0x63,0x66,0x73,0x76},              // v
{0x02,0x07,0x2,0x13,0x16,0x17,0x22,0x24,0x25,0x27,0x32,0x37,0x42,0x47,0x52,0x57,0x62,0x67,0x72,0x77},              // w
{0x02,0x07,0x13,0x16,0x23,0x26,0x34,0x35,0x44,0x45,0x53,0x56,0x63,0x66,0x72,0x77},              // x
{0x04,0x05,0x14,0x15,0x24,0x25,0x34,0x35,0x44,0x45,0x53,0x56,0x63,0x66,0x72,0x77},              // y
{0x02,0x03,0x04,0x05,0x06,0x07,0x12,0x23,0x34,0x45,0x56,0x67,0x72,0x73,0x74,0x75,0x76,0x77},       // Z

};

void dropPattern(){
    ////////////////////////////////////drop pattern//////////////////////////////////////////////////////
    for(int i=0;i<=ALL_LED;i++){
      set_pwm_level(i,5);
      sleep_ms(10);
      }
    sleep_ms(1000);
    for(int i=0;i<=ALL_LED;i++){
      set_pwm_level(i,0);
      sleep_ms(10);
      }
    sleep_ms(1000);
}

void alphaNumericCharacter(){
   ////////////////////////////////////number and letters/////////////////////////////////////////////
   for(int j=0;j<36;j++){
      for(int i=0;i<30;i++){
         set_pwm_level(array[j][i],10);
         }
      sleep_ms(500);
      set_pwm_level(ALL_LED,0);
      sleep_ms(500);
      }
}

int main(){
   
   stdio_init_all();
   i2c_init(i2c1, 100 * 1000);
   gpio_set_function(I2C_SDA_PIN, GPIO_FUNC_I2C);
   gpio_set_function(I2C_SCL_PIN, GPIO_FUNC_I2C);
   init_driver(i2c1);

   gpio_init(SDB_PIN);
   gpio_set_dir(SDB_PIN,1);
   gpio_put(SDB_PIN,1);

   while(1)
   {
   #ifdef USE_PATTERN
   dropPattern();
   #endif

   #ifdef USE_ALPHANUMERIC
   alphaNumericCharacter();
   #endif

   }
}

